### Add comment to the pull request without channel
POST {{EndpointHost}}/bitbucket-webhook
Content-Type: application/json

< ./test-payloads/PR-comment-added-test-payload.json

> {%
    client.assert(response.body === "Internal Server Error")
    client.assert(response.status === 500)
%}

### Open pull request
POST {{EndpointHost}}/bitbucket-webhook
Content-Type: application/json

< ./test-payloads/PR-opened-test-payload.json

> {%
    client.assert(response.status === 200)
%}

### Add comment
POST {{EndpointHost}}/bitbucket-webhook
Content-Type: application/json

< ./test-payloads/PR-comment-added-test-payload.json

> {%
    client.assert(response.status === 200)
%}

### Edit comment
POST {{EndpointHost}}/bitbucket-webhook
Content-Type: application/json

< ./test-payloads/PR-comment-edited-test-payload.json

> {%
    client.assert(response.status === 200)
%}

### Delete comment
POST {{EndpointHost}}/bitbucket-webhook
Content-Type: application/json

< ./test-payloads/PR-comment-deleted-test-payload.json

> {%
    client.assert(response.status === 200)
%}

### Modify PR
POST {{EndpointHost}}/bitbucket-webhook
Content-Type: application/json

< ./test-payloads/PR-modified-test-payload.json

> {%
    client.assert(response.status === 200)
%}

### Reviewer requested changes
POST {{EndpointHost}}/bitbucket-webhook
Content-Type: application/json

< ./test-payloads/PR-needs-work-test-payload.json

> {%
    client.assert(response.status === 200)
%}

### Reviewers list updated
POST {{EndpointHost}}/bitbucket-webhook
Content-Type: application/json

< ./test-payloads/PR-reviewer-updated-test-payload.json

> {%
    client.assert(response.status === 200)
%}

### Add commit
POST {{EndpointHost}}/bitbucket-webhook
Content-Type: application/json

< ./test-payloads/PR-from-ref-updated-test-payload.json

> {%
    client.assert(response.status === 200)
%}

### Reviewer approved pull request
POST {{EndpointHost}}/bitbucket-webhook
Content-Type: application/json

< ./test-payloads/PR-approved-test-payload.json

> {%
    client.assert(response.status === 200)
%}


### Merge pull request
POST {{EndpointHost}}/bitbucket-webhook
Content-Type: application/json

< ./test-payloads/PR-merged-test-payload.json

> {%
    client.assert(response.status === 200)
%}

### Invalid payload
POST {{EndpointHost}}/bitbucket-webhook
Content-Type: application/json

{
  "eventKey": "invalid-payload"
}

> {%
    client.assert(response.body === "Internal Server Error")
    client.assert(response.status === 500)
%}

### Add comment to the already closed pull request
POST {{EndpointHost}}/bitbucket-webhook
Content-Type: application/json

< ./test-payloads/PR-comment-added-test-payload.json

> {%
    client.assert(response.body === "Internal Server Error")
    client.assert(response.status === 500)
%}
